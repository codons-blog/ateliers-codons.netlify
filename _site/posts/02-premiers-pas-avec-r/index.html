<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gergana Daskalova">
<meta name="author" content="Jonathan Kitt (adaptation)">
<meta name="dcterms.date" content="2022-11-04">

<title>Ateliers codons - Premiers pas avec R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ateliers codons</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/codons-blog/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <h1 class="title">Premiers pas avec R</h1>
            <p class="subtitle lead">Se familiariser avec R, manipuler des données et les représenter</p>
                                <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">RStudio</div>
                <div class="quarto-category">bases</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Authors</div>
      <div class="quarto-title-meta-contents">
               <p>Gergana Daskalova </p>
               <p>Jonathan Kitt (adaptation) </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 4, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sommaire</h2>
   
  <ul class="collapse">
  <li><a href="#r_intro" id="toc-r_intro" class="nav-link active" data-scroll-target="#r_intro">Introduction</a>
  <ul class="collapse">
  <li><a href="#r_def" id="toc-r_def" class="nav-link" data-scroll-target="#r_def">Qu’est-ce que R ?</a></li>
  <li><a href="#naviguer_rstudio" id="toc-naviguer_rstudio" class="nav-link" data-scroll-target="#naviguer_rstudio">Naviguer dans RStudio</a></li>
  </ul></li>
  <li><a href="#organiser-son-travail" id="toc-organiser-son-travail" class="nav-link" data-scroll-target="#organiser-son-travail">Organiser son travail</a>
  <ul class="collapse">
  <li><a href="#créer-un-projet" id="toc-créer-un-projet" class="nav-link" data-scroll-target="#créer-un-projet">Créer un projet</a></li>
  <li><a href="#créer-une-arborescence" id="toc-créer-une-arborescence" class="nav-link" data-scroll-target="#créer-une-arborescence">Créer une arborescence</a></li>
  </ul></li>
  <li><a href="#importer-des-données" id="toc-importer-des-données" class="nav-link" data-scroll-target="#importer-des-données">Importer des données</a></li>
  <li><a href="#explorer-des-données" id="toc-explorer-des-données" class="nav-link" data-scroll-target="#explorer-des-données">Explorer des données</a></li>
  <li><a href="#manipuler-des-données" id="toc-manipuler-des-données" class="nav-link" data-scroll-target="#manipuler-des-données">Manipuler des données</a>
  <ul class="collapse">
  <li><a href="#renommer-des-colonnes" id="toc-renommer-des-colonnes" class="nav-link" data-scroll-target="#renommer-des-colonnes">Renommer des colonnes</a></li>
  <li><a href="#sélectionner-et-filtrer-des-données" id="toc-sélectionner-et-filtrer-des-données" class="nav-link" data-scroll-target="#sélectionner-et-filtrer-des-données">Sélectionner et filtrer des données</a></li>
  <li><a href="#modifier-une-variable" id="toc-modifier-une-variable" class="nav-link" data-scroll-target="#modifier-une-variable">Modifier une variable</a></li>
  <li><a href="#ajouter-une-variable" id="toc-ajouter-une-variable" class="nav-link" data-scroll-target="#ajouter-une-variable">Ajouter une variable</a></li>
  <li><a href="#supprimer-les-données-manquantes" id="toc-supprimer-les-données-manquantes" class="nav-link" data-scroll-target="#supprimer-les-données-manquantes">Supprimer les données manquantes</a></li>
  <li><a href="#transformer-un-vecteur-en-un-facteur" id="toc-transformer-un-vecteur-en-un-facteur" class="nav-link" data-scroll-target="#transformer-un-vecteur-en-un-facteur">Transformer un vecteur en un facteur</a></li>
  <li><a href="#agréger-des-données" id="toc-agréger-des-données" class="nav-link" data-scroll-target="#agréger-des-données">Agréger des données</a></li>
  <li><a href="#exporter-des-données" id="toc-exporter-des-données" class="nav-link" data-scroll-target="#exporter-des-données">Exporter des données</a></li>
  </ul></li>
  <li><a href="#représenter-des-données" id="toc-représenter-des-données" class="nav-link" data-scroll-target="#représenter-des-données">Représenter des données</a>
  <ul class="collapse">
  <li><a href="#barplot" id="toc-barplot" class="nav-link" data-scroll-target="#barplot">Barplot</a></li>
  <li><a href="#boxplot" id="toc-boxplot" class="nav-link" data-scroll-target="#boxplot">Boxplot</a></li>
  <li><a href="#histogramme" id="toc-histogramme" class="nav-link" data-scroll-target="#histogramme">Histogramme</a></li>
  <li><a href="#scatter-plot" id="toc-scatter-plot" class="nav-link" data-scroll-target="#scatter-plot">Scatter plot</a></li>
  <li><a href="#exporter-un-graphique" id="toc-exporter-un-graphique" class="nav-link" data-scroll-target="#exporter-un-graphique">Exporter un graphique</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">




<p><em>Ce tutoriel est adapté de <a href="https://ourcodingclub.github.io/tutorials/intro-to-r/">Getting started with R and RStudio</a> du site <a href="https://ourcodingclub.github.io/">Our Coding Club</a>.</em></p>
<p><br></p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Objectifs du tutoriel
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Se familiariser avec RStudio<br>
</li>
<li>Organiser son travail<br>
</li>
<li>Utiliser un script<br>
</li>
<li>Importer et exporter des données<br>
</li>
<li>Explorer, manipuler et représenter des données</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour savoir comment installer R et RStudio, cliquez <a href="https://ateliers-codons.netlify.app/posts/01-installer-r-et-rstudio/">ici</a></p>
</div>
</div>
<p><br></p>
<section id="r_intro" class="level1">
<h1>Introduction</h1>
<section id="r_def" class="level2">
<h2 class="anchored" data-anchor-id="r_def">Qu’est-ce que R ?</h2>
<p><br></p>
<p>R est un langage de programmation statistique qui a rapidement gagné en popularité dans de nombreux domaines scientifiques.</p>
<p>Il a été développé par Ross Ihaka et Robert Gentleman, du Département de Statistiques de l’Université d’Auckland, comme implémentation libre du langage de programmation S.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quelques dates
</div>
</div>
<div class="callout-body-container callout-body">
<table class="table">
<tbody>
<tr class="odd">
<td>1991</td>
<td>Création du langage R</td>
</tr>
<tr class="even">
<td>1993</td>
<td>R est dévoilé au public</td>
</tr>
<tr class="odd">
<td>1996</td>
<td><a href="https://www.stat.auckland.ac.nz/~ihaka/downloads/R-paper.pdf">Article dans le <em>Journal of Computational and Graphical Statistics</em></a></td>
</tr>
</tbody>
</table>
</div>
</div>
<p><br></p>
<p>R désigne également le logiciel qui utilise ce langage pour des calculs statistiques (et tout un tas d’autres applications (manipulation de données, graphiques, …).</p>
<p>Il dispose d’une communauté en ligne très active ainsi que d’extensions appelées <strong>packages</strong> pour presque tous les domaines et applications possibles et imaginables (cartographie, fouille de texte, modélisation, …).</p>
<p>Contrairement à d’autres logiciels de statistiques comme Minitab ou SPSS, R peut être exécuté entièrement en <strong>ligne de commande</strong> et ne nécessite pas d’interface graphique, ce qui lui confère une grande flexibilité.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quelques avantages de R
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>C’est un outil libre et open source (tout le monde peut utiliser le code et voir comment il fonctionne)</p></li>
<li><p>C’est un langage de programmation plutôt qu’une interface graphique, ce qui permet à l’utilisateur de sauvegarder facilement des <strong>scripts</strong> pour les ré-utiliser ou les partager</p></li>
<li><p>Beaucoup de personnes l’utilisent dans beaucoup de domaines différents - il est rare d’être confronté à un problème qui n’a jamais été résolu !</p></li>
</ul>
</div>
</div>
<p><br></p>
</section>
<section id="naviguer_rstudio" class="level2">
<h2 class="anchored" data-anchor-id="naviguer_rstudio">Naviguer dans RStudio</h2>
<p><br></p>
<p>La plupart des utilisateurs interagissent avec R à l’aide d’une interface graphique, dont la plus connue et répandue est RStudio.</p>
<p>En ouvrant RStudio, vous verrez une fenêtre comme celle ci-dessous, divisée en trois panneaux :</p>
<p><img src="img/rstudio_01.png" class="img-fluid" style="width:100.0%"></p>
<p><br></p>
<section id="la-console" class="level3">
<h3 class="anchored" data-anchor-id="la-console">La console</h3>
<p><br></p>
<p>Vous pouvez y taper du code et l’exécuter en appuyant sur <code>Entrée</code>.</p>
<p>Quand vous démarrez une nouvelle session dans RStudio, la console affiche également des informations comme la version de R présente sur votre ordinateur ainsi que des indications sur la manière d’obtenir de l’aide.</p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
L’invite de commande
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans la console, une ligne commence par <code>&gt;</code> : c’est ce qu’on appelle l’invite de commande. Cela indique que R est prêt à recevoir vos instructions.</p>
<p>Tapez <code>2+2</code> puis appuyez sur <code>Entrée</code> : la console affiche le résultat.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
</div>
<p>Dans la console, vous pouvez parcourir les dernières commandes exécutées à l’aide des flèches haut et bas.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : vider la console
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour vider la console, utilisez la combinaison <strong>Ctrl + L</strong></p>
</div>
</div>
<p><br></p>
</section>
<section id="lespace-de-travail" class="level3">
<h3 class="anchored" data-anchor-id="lespace-de-travail">L’espace de travail</h3>
<p><br></p>
<p>Vous y trouverez votre <strong>environnement</strong> (données importées, objets, fonctions, …), ainsi que d’autres onglets comme l’historique des commandes exécutées ou l’accès à des tutoriels (pour les versions récentes de RStudio).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Un langage orienté objet
</div>
</div>
<div class="callout-body-container callout-body">
<p>R est un langage orienté objet, ce qui veut dire que tout ce que vous manipulez dans R (données, fonctions, …) est stocké dans un objet.</p>
</div>
</div>
<p><br></p>
<p>Lorsque vous quittez votre session RStudio, vous aurez la possibilité de sauvegarder votre espace de travail. Il est préférable de ne pas le faire afin de démarrer chaque session avec un espace de travail vide.</p>
<p><br></p>
</section>
<section id="le-navigateur" class="level3">
<h3 class="anchored" data-anchor-id="le-navigateur">Le navigateur</h3>
<p><br></p>
<p>Ce navigateur vous permet de naviguer dans vos dossiers, de copier, renommer ou supprimer des fichiers, à la manière d’un explorateur classique.</p>
<p>Les autres onglets permettent de visualiser les graphiques, de voir quels packages (extensions) sont installés, ou encore d’afficher l’aide.</p>
<p><br></p>
</section>
<section id="le-script" class="level3">
<h3 class="anchored" data-anchor-id="le-script">Le script</h3>
<p><br></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Le code tapé et exécuté dans la console ne sera plus disponible quand vous quitterez votre session RStudio. A la manière d’un document Word, un script vous permet de sauvegarder votre code afin d’y accéder ultérieurement ou de le partager.</p>
</div>
</div>
<p><br></p>
<p>Pour ouvrir un nouveau script, cliquez sur le <em>“plus”</em> dans le coin supérieur gauche de la fenêtre RStudio puis sur <em>R Script</em>.</p>
<p><img src="img/rstudio_09.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : ouvrir un nouveau script
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour ouvrir un nouveau script, utilisez la combinaison <strong>Ctrl + Shift + N</strong></p>
</div>
</div>
<p><br></p>
<p>Un nouveau panneau s’affiche :</p>
<p><img src="img/rstudio_10.png" class="img-fluid" style="width:100.0%"></p>
<p><br></p>
</section>
</section>
</section>
<section id="organiser-son-travail" class="level1">
<h1>Organiser son travail</h1>
<section id="créer-un-projet" class="level2">
<h2 class="anchored" data-anchor-id="créer-un-projet">Créer un projet</h2>
<p><br></p>
<p>Lorsque vous partagez votre code avec d’autres personnes, celles-ci doivent pouvoir reproduire votre analyse sans erreur et obtenir des résultats identiques (on parle de <strong>reproductibilité</strong>).</p>
<p>Les <strong>projets</strong> RStudio aident à construire une analyse reproductible en regroupant tous les éléments nécessaires dans un seul dossier (code, données, figures et paramètres). Cela vous évitera de perdre du temps à chercher des fichiers dans votre ordinateur : la racine du projet est votre répertoire de travail.</p>
<p>Nous verrons dans un autre tutoriel comment connecter un projet RStudio à un gestionnaire de version comme GitLab : vous pourrez travailler à plusieurs sur un même code en gardant une trace de toutes les modifications apportées par l’une ou l’autre personne.</p>
<p>Pour créer un projet, cliquez sur <em>File</em> puis <em>New project…</em> :</p>
<p><img src="img/rstudio_02.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<p>Choisissez <em>New Directory</em> puis <em>New Project</em></p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="img/rstudio_03.png" class="img-fluid"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="img/rstudio_04.png" class="img-fluid"></p>
</div>
</div>
</div>
<p><br></p>
<p>Dans la fenêtre <em>Create New Project</em>, attribuez un nom et un emplacement au projet, puis cliquez sur <em>Create project</em>.</p>
<p><img src="img/rstudio_05.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<p>Quand vous voudrez travailler à nouveau sur ces données, il vous suffira d’ouvrir le projet en double-cliquant sur le fichier <code>.Rproj</code>.</p>
<p><img src="img/rstudio_06.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bonnes pratiques : nommer ses fichiers et dossiers
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>privilégiez les noms courts et explicites (à éviter : <em>fichier_2e_version_a_verifier.txt</em>)</li>
<li>ne mettez ni espace ni caractères spéciaux (accents, symboles, …)<br>
</li>
<li>pour les dates, privilégiez le format AAAAMMJJ (année, mois, jour)</li>
<li>mettez l’élément le plus important en premier (par exemple : <em>projet_date_contenu</em>)<br>
</li>
<li>optez pour l’une de ces deux conventions d’écriture : camel case (<em>MonProjet</em>) ou snake case (<em>mon_projet</em>)</li>
</ul>
</div>
</div>
<p><br></p>
</section>
<section id="créer-une-arborescence" class="level2">
<h2 class="anchored" data-anchor-id="créer-une-arborescence">Créer une arborescence</h2>
<p>Il est toujours préférable de passer un peu de temps à bien organiser un projet lors de sa création, plutôt que de passer beaucoup de temps par la suite à déplacer des fichiers, les renommer, les rechercher, …</p>
<p>Pour créer un nouveau dossier dans votre projet, cliquez sur <em>New Folder</em> dans l’onglet <em>Files</em> du navigateur :</p>
<p><img src="img/rstudio_07.png" class="img-fluid" style="width:100.0%"></p>
<p>L’organisation proposée ci-dessous est utilisable dans une très grande majorité de cas :</p>
<ul>
<li><p><strong>raw</strong> : données brutes</p></li>
<li><p><strong>data</strong> : données issues de la manipulation/modification des données brutes</p></li>
<li><p><strong>scripts</strong> : code utilisé pour analyser les données, créer les graphiques, …</p></li>
<li><p><strong>results</strong> : fichiers de résultats obtenus durant l’analyse</p></li>
<li><p><strong>figs</strong> : graphiques générés au cours de l’analyse</p></li>
<li><p><strong>docs</strong> : rapports, présentations, articles en lien avec l’analyse, documents concernant les outils utilisés, … |</p></li>
</ul>
<p><img src="img/rstudio_08.png" class="img-fluid" style="width:100.0%"></p>
<p><br></p>
</section>
</section>
<section id="importer-des-données" class="level1">
<h1>Importer des données</h1>
<p><br></p>
<p>Le jeu de données que nous allons utiliser contient des mesures pour <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0090081">trois espèces de pingouins vivant sur l’archipel Palmer en Antarctique</a>.</p>
<p>Toute opération réalisée dans R, que ce soit importer ou exporter des données, effectuer des calculs ou encore créer des graphiques, fait appel à une <strong>fonction</strong>. Une fonction est constituée de code et permet d’exécuter une action.</p>
<p>La manière dont la fonction s’exécute peut se modifier à l’aide d’<strong>arguments</strong> (obligatoires ou optionnels).</p>
<p>Pour importer les données, nous utilisons la fonction <code>read.csv()</code> en précisant deux arguments :</p>
<ul>
<li><p>le chemin vers l’emplacement du fichier à importer, entre guillemets</p></li>
<li><p>l’argument <code>check.names = FALSE</code> pour conserver les noms de colonnes tels quels.</p></li>
</ul>
<p>Tapez le code ci-dessous dans votre script puis cliquez sur <em>Run</em></p>
<p><img src="img/rstudio_29.png" class="img-fluid"></p>
<p><br></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bonnes pratiques : auto-complétion
</div>
</div>
<div class="callout-body-container callout-body">
<p>R vous aide à compléter votre code : tapez <code>re</code> puis <em>Tab</em>, et vous verrez s’afficher une liste de fonctions ou d’objets commençant par ces deux lettres. Vous pouvez naviguer à l’aide des flèches haut et bas et valider votre choix en appuyant à nouveau sur <em>Tab</em>. Cette fonctionnalité de R est particulièrement utile lorsque vous manipulez des fichiers ou objets ayant des noms complexes.</p>
</div>
</div>
<p><br></p>
<p>Dans la console, le code s’exécute et les données sont affichées. Cela indique que la commande a bien fonctionné, mais que les données ne sont pour l’instant pas disponibles dans notre environnement. Nous allons donc importer les données et les stocker dans un objet que nous appelons <em>pingouins</em>. Pour cela nous utilisons la <strong>flèche d’assignation <code>&lt;-</code></strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : flèche d’assignation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour insérer une flèche d’assignation, utilisez la combinaison <strong>Alt + “-”</strong> (tiret du 6).</p>
</div>
</div>
<p><br></p>
<p>Tapez le code ci-dessous dans votre script puis cliquez sur <em>Run</em> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>pingouins <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"raw/pingouins.csv"</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : exécuter du code
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour exécuter une ou plusieurs lignes de code, sélectionnez les lignes et utilisez la combinaison <strong>Ctrl + Entrée</strong></p>
</div>
</div>
<p><br></p>
<p>Vous pouvez également importer des données en cliquant sur <em>Import Dataset</em> puis sur <em>From Text (base)…</em> dans le panneau <em>Environnement</em> :</p>
<p><img src="img/rstudio_31.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<p>Choisissez le fichier à importer. La fenêtre qui s’ouvre vous permet de vérifier que les données seront correctement importées (présence d’un en-tête, séparateur de colonnes, …) :</p>
<p><img src="img/rstudio_32.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<p>La commande utilisée pour importer les données s’affiche dans la console. En procédant ainsi, R utilise le <strong>chemin absolu</strong> vers le fichier (à partir de la racine du disque dur), alors que nous avions utilisé le <strong>chemin relatif</strong> (à partir du répertoire de travail) à l’intérieur de la fonction <code>read.csv()</code>.</p>
<p><br></p>
<p>Notre environnement contient maintenant un objet <em>pingouins</em>, et vous pouvez voir l’indication <code>344 obs. of 9 variables</code> : le jeu de données contient 344 observations (lignes) et 9 variables (colonnes).</p>
<p><img src="img/rstudio_12.png" class="img-fluid" style="width:100.0%"></p>
<p><br></p>
<p>En cliquant sur la flèche bleue à gauche du nom de l’objet, vous aurez accès à plus d’informations :</p>
<p><img src="img/rstudio_13.png" class="img-fluid" style="width:100.0%"></p>
<p><br></p>
<ul>
<li><p>les <strong>noms</strong> des variables, précédés du signe <code>$</code></p></li>
<li><p>le <strong>type</strong> de chaque varible : caractère (chr), nombres entiers (int) ou décimaux (int), logique (log)</p></li>
<li><p>les <strong>premiers éléments</strong> de chaque variable</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
L’opérateur <strong>$</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Cet opérateur permet de sélectionner la colonne d’un tableau. Dans la console, tapez <code>pingouins$</code> et appuyez sur <em>Tab</em>.</p>
<p><img src="img/rstudio_15.png" class="img-fluid" style="width:50.0%"></p>
<p>Vous pouvez choisir la variable qui vous intéresse à l’aide des <strong>flèches haut et bas</strong> (<em>Espece</em> par exemple) puis appuyer à nouveau sur <strong>Tab</strong> pour valider. Vous verrez alors s’afficher les 344 observations de cette variable.</p>
<p><img src="img/rstudio_16.png" class="img-fluid" style="width:75.0%"></p>
</div>
</div>
<p><br></p>
<p>Vous pouvez afficher le tableau en cliquant sur l’icône à droite du nom de l’objet dans l’environnement.</p>
<p><img src="img/rstudio_14.png" class="img-fluid" style="width:100.0%"></p>
<p>Cela ouvre un nouvel onglet à côté de votre script :</p>
<p><img src="img/rstudio_17.png" class="img-fluid" style="width:100.0%"></p>
<p><br></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bonnes pratiques : commenter ses scripts
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prenez dès maintenant l’habitude de commenter vos scripts. Il s’agit de rédiger des commentaires qui expliquent ce que fait votre code, pour le rendre plus compréhensible par vos collègues - et par vous-même quand vous reviendrez sur un script après un certain temps.</p>
<p>Pour ajouter un commentaire, utilisez un <code>#</code> au début d’une ligne puis rédigez votre commentaire. Dans R, le code placé après un <code>#</code> n’est pas exécuté :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ceci est un commentaire qui ne sera pas exécuté</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># La ligne suivante sera exécutée</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
</div>
<p><br></p>
<p>Pour commencer, ajoutons des informations en haut de notre script :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ateliers codons</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Premiers pas avec R</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2022-11-07</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Importer le jeu de donnees</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>pingouins <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"raw/pingouins.csv"</span>, <span class="at">check.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : commentaires
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour commenter ou dé-commenter des lignes de code, utilisez la combinaison <strong>Ctrl + Shift + C</strong>.</p>
</div>
</div>
<p><br></p>
<p>Avant d’aller plus loin, sauvegardez votre script en cliquant sur l’icône disquette en haut de votre script :</p>
<p><img src="img/rstudio_30.png" class="img-fluid" style="width:100.0%"></p>
<p>Choisissez le dossier où sera sauvegardé votre script - <strong>scripts</strong> dans notre cas, et nommez votre script puis cliquez sur <strong>Save</strong> :</p>
<p><img src="img/rstudio_19.png" class="img-fluid" style="width:100.0%"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : sauvegarder un script
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour sauvegarder un script, uilisez la combinaison <strong>Ctrl + S</strong></p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bonne pratiques : structurer son script
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez diviser votre script en différentes parties pour simplifier la lecture. Pour cela, ajoutez des titres sous forme de commentaires et accolez des tirets (au moins quatre) pour signaler à R qu’il s’agit de divisions dans votre script.</p>
<p><img src="img/rstudio_24.png" class="img-fluid" style="width:100.0%"></p>
<p>En cliquant sur l’icône <strong>Menu</strong> à droite vous aurez accès à une table des matières dans laquelle vous pourrez naviguer en cliquant sur la partie qui vous intéresse.</p>
<p><img src="img/rstudio_25.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p><br></p>
</section>
<section id="explorer-des-données" class="level1">
<h1>Explorer des données</h1>
<p>Avant de débuter une analyse des données, il est toujours utile d’explorer rapidement ces données afin de s’assurer qu’elles ont été correctement importées, que les variables numériques sont effectivement des nombres et pas des chaînes de caractères, …</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Cette première étape consistant à vérifier les données, le code utilisé peut être tapé directement dans la console. Le script contiendra plutôt le code utilisé pour nettoyer les données, ainsi que toutes les étapes ultérieures de l’analyse.</p>
</div>
</div>
<p>Commençons par regarder à quel structure de données nous avons affaire :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pingouins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>Quel type de données contient la variable Espece ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(pingouins<span class="sc">$</span>Espece)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Les structures et types de données dans R
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il existe plusieurs structures de données :</p>
<ul>
<li><p>Un <em>vecteur</em> est un objet à une dimension contenant une chaîne d’éléments d’un seul type<br>
</p></li>
<li><p>Un <em>facteur</em> est un vecteur contenant un nombre limité de modalités</p></li>
<li><p>Un <em>data frame</em> est un tableau dont les colonnes (des vecteurs) peuvent être de différents types</p></li>
<li><p>Une <em>matrice</em> est un tableau ne contenant qu’un seul type de données</p></li>
<li><p>Une <em>liste</em> peut contenir différents éléments (un vecteur, un data frame, …)</p></li>
</ul>
<p><br></p>
<p>Ces structures peuvent contenir différents types de données :</p>
<ul>
<li><p>des <em>caractères</em></p></li>
<li><p>des <em>nombres entiers</em></p></li>
<li><p>des <em>nombres décimaux</em> (dans R, le séparateur décimal est le point <code>.</code>)</p></li>
<li><p>des <em>opérateurs logiques</em> (TRUE ou FALSE)</p></li>
</ul>
</div>
</div>
<p><br></p>
<p>Vous pouvez afficher les dimensions et la structure des données :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensions du tableau (nb lignes par nb colonnes)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pingouins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 344   9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Structure du tableau</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pingouins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   344 obs. of  9 variables:
 $ etudeNumero         : chr  "PAL0708" "PAL0708" "PAL0708" "PAL0708" ...
 $ Echantillon Numero  : int  1 2 3 4 5 6 7 8 9 10 ...
 $ Espece              : chr  "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" ...
 $ Ile                 : chr  "Torgersen" "Torgersen" "Torgersen" "Torgersen" ...
 $ ID Individu         : chr  "N1A1" "N1A2" "N2A1" "N2A2" ...
 $ Longueur Bec (mm)   : num  39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
 $ Hauteur Bec (mm)    : num  18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
 $ Longueur Aile (mm)  : int  181 186 195 NA 193 190 181 195 193 190 ...
 $ Masse corporelle (g): int  3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous remarquerez que la fonction <code>str(pingouins)</code> affiche des informations très proches de celles obtenues en cliquant sur la flèche bleue à gauche de l’objet pingouins dans l’environnement.</p>
</div>
</div>
<p><br></p>
<p>Les fonctions suivantes permettent l’afficher le début ou la fin du tableau :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher les premieres lignes du tableau</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pingouins)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher les dernieres lignes du tableau</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(pingouins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Afficher l’aide d’une fonction
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez afficher l’aide d’une fonction de deux manières :</p>
<ul>
<li><p>taper <code>help(fonction)</code> (pensez à l’auto-complétion !)</p></li>
<li><p>taper <code>?fonction</code></p></li>
</ul>
<p>Essayez en tapant dans la console <code>?he</code> puis appuyez sur <em>Tab</em> : R vous propose une liste de fonctions commençant par <code>he</code>. Utilisez les flèches haut et bas pour choisir la fonction <code>head</code>. Une petite fenêtre vous donne un aperçu du contenu de l’aide pour la fonction (utile quand vous hésitez entre plusieurs fonctions). Une fois la fonction sélectionnée, appuyez sur la touche <em>F1</em> pour afficher l’aide complète dans l’onglet <em>Help</em>.</p>
<p>L’aide d’une fonction contient plusieurs paragraphes :</p>
<ul>
<li><p><em>Description</em> : présentation sommaire de la fonction</p></li>
<li><p><em>Usage</em> : comment utiliser la fonction</p></li>
<li><p><em>Arguments</em> : ils peuvent être obligatoires ou optionnels</p></li>
<li><p><em>Details</em> : format de données à fournir en entrée, précisions sur les arguments, …</p></li>
<li><p><em>Value</em> : type d’objet obtenu en sortie</p></li>
<li><p><em>Note</em> : informations additionnelles</p></li>
<li><p><em>Author(s)</em> : personnes ayant contribué à l’écriture du code de la fonction</p></li>
<li><p><em>Examples</em> : exemples d’utilisation, avec la possibilité d’exécuter ces exemples</p></li>
</ul>
<p>Dans le cas de <code>head()</code>, vous pouvez voir que par défaut, la fonction retournera les 6 premières lignes (<code>n = 6L</code>, <code>L</code> indiquant qu’il s’agit d’un nombre entier). Pour afficher uniquement les deux premières lignes du tableau <em>pingouins</em>, il vous faudrait modifier cet argument : <code>head(pingouins, n = 2L)</code></p>
</div>
</div>
<p>La fonction <code>table()</code> permet d’extraire d’une variable les observations uniques et d’afficher le nombre de fois qu’elles apparaissent :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(pingouins<span class="sc">$</span>Espece)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Adelie Penguin (Pygoscelis adeliae) 
                                      152 
Chinstrap penguin (Pygoscelis antarctica) 
                                       68 
        Gentoo penguin (Pygoscelis papua) 
                                      124 </code></pre>
</div>
</div>
<p><br></p>
<p>Vous pouvez explorer une variable d’intérêt à l’aide de l’opérateur <code>$</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher les premiers elements d'une variable</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pingouins<span class="sc">$</span><span class="st">`</span><span class="at">Masse corporelle (g)</span><span class="st">`</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher les derniers elements d'une variable</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(pingouins<span class="sc">$</span><span class="st">`</span><span class="at">Masse corporelle (g)</span><span class="st">`</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le type, le nombre d'elements et les premiers elements d'une variable</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pingouins<span class="sc">$</span><span class="st">`</span><span class="at">Masse corporelle (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>La fonction <code>summary()</code> est particulièrement intéressante pour avoir une vue d’ensemble de vos données.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pingouins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="img/rstudio_22.png" class="img-fluid" style="width:100.0%"></p>
<p>Les informations affichées dépendent du type de variable :</p>
<ul>
<li><em>nombre d’éléments, classe et mode</em> pour les variables de type <em>caractère</em></li>
<li><em>statistiques</em> pour les variables de type <em>numérique</em></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Les données manquantes
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez trouver dans vos données des éléments notés <code>NA</code>. Il s’agit d’une donnée manquante (<em>Not Available</em>) : aucune donnée n’existe pour ce cas précis.</p>
<p>Cette valeur<code>NA</code> est à différencier de la valeur <code>NaN</code> (<em>Not a Number</em>) également rencontrée dans R. Il s’agit alors du résultat d’une opération arithmétique invalide, telle que 0/0.</p>
</div>
</div>
<p><br></p>
</section>
<section id="manipuler-des-données" class="level1">
<h1>Manipuler des données</h1>
<p>Créons un objet <em>pingouins_propre</em> qui nous servira pour nettoyer et manipuler les données.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre <span class="ot">&lt;-</span> pingouins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="renommer-des-colonnes" class="level2">
<h2 class="anchored" data-anchor-id="renommer-des-colonnes">Renommer des colonnes</h2>
<p>Les noms des colonnes ne sont pas dans un format idéal (présence d’espaces, de parenthèses).</p>
<p>La fonction <code>names()</code> permet d’accéder aux noms des colonnes d’un tableau :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pingouins_propre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "etudeNumero"          "Echantillon Numero"   "Espece"              
[4] "Ile"                  "ID Individu"          "Longueur Bec (mm)"   
[7] "Hauteur Bec (mm)"     "Longueur Aile (mm)"   "Masse corporelle (g)"</code></pre>
</div>
</div>
<p><br></p>
<p>Nous allons modifier les noms de colonnes en :</p>
<ul>
<li><p>supprimant les parenthèses</p></li>
<li><p>remplaçant les espaces par des <code>_</code></p></li>
<li><p>remplaçant les majuscules par des minuscules</p></li>
</ul>
<p><br></p>
<p>La fonction <code>gsub()</code> qui permet de remplacer un motif par un autre dans une chaîne, s’utilise de la manière suivante : <code>gsub(motif, remplacement, objet)</code></p>
<p>Commençons par supprimer les parenthèses. Nous allons pour cela utiliser une <strong>expression régulière</strong> : le motif recherché est soit une parenthèse ouverte soit une parenthèse fermée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>nouveaux_noms <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"[()]"</span>, <span class="st">""</span>, <span class="fu">names</span>(pingouins_propre))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remplaçons maintenant les espaces par des <code>_</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>nouveaux_noms <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, nouveaux_noms)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La fonction <code>tolower()</code> permet de remplacer les majuscules d’une chaîne de caractères par des minuscules (à l’inverse de la fonction <code>toupper()</code>) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>nouveaux_noms <span class="ot">&lt;-</span> <span class="fu">tolower</span>(nouveaux_noms)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remplaçons les noms de colonnes du tableau par ce vecteur <em>nouveaux_noms</em> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pingouins_propre) <span class="ot">&lt;-</span> nouveaux_noms</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Assurons-nous que notre tableau contient bien les nouveaux noms de colonnes :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pingouins_propre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "etudenumero"        "echantillon_numero" "espece"            
[4] "ile"                "id_individu"        "longueur_bec_mm"   
[7] "hauteur_bec_mm"     "longueur_aile_mm"   "masse_corporelle_g"</code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Assigner et afficher
</div>
</div>
<div class="callout-body-container callout-body">
<p>Lorsque nous utilisons une flèche d’assignation, le résultat du code exécuté ne s’affiche pas dans la console. Pour éviter de taper le nom de l’objet que l’on souhaite afficher pour vérifier que le code a bien fonctionné, nous pouvons entourer le code par des parenthèses :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">names</span>(pingouins_propre) <span class="ot">&lt;-</span> nouveaux_noms)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le résultat de la commande s’affiche maintenant dans la console.</p>
</div>
</div>
<p><br></p>
<p>Nous pouvons maintenant supprimer l’objet nouveaux_noms de notre environnement à l’aide de la fonction <code>rm()</code> (remove) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(nouveaux_noms)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Supprimer des objets
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous pouvez également supprimer des objets directement dans le panneau Environnement :</p>
<ul>
<li>Sur la droite du panneau, cliquez sur <em>List</em> puis sur <em>Grid</em></li>
</ul>
<p><img src="img/rstudio_33.png" class="img-fluid" style="width:100.0%"></p>
<ul>
<li>Cochez les objets à supprimer puis cliquez sur le balai</li>
</ul>
<p><img src="img/rstudio_34.png" class="img-fluid" style="width:100.0%"></p>
<p>Attention : si vous cliquez sur le balai alors que les objets sont sous forme de liste, vous supprimerez tous les objets de votre environnement.</p>
</div>
</div>
</section>
<section id="sélectionner-et-filtrer-des-données" class="level2">
<h2 class="anchored" data-anchor-id="sélectionner-et-filtrer-des-données">Sélectionner et filtrer des données</h2>
<p><br></p>
<p>Dans R, la sélection de données, que ce soit une cellule, une ligne ou une colonne d’un tableau, ou encore un élément dans une chaîne, s’effectue à l’aide des crochets <code>[]</code>.</p>
<ul>
<li>Imaginons un <em>vecteur v</em>, donc un objet à une seule dimension. Vous pouvez sélectionner un seul élément (<code>v[2]</code>), plusieurs éléments qui se suivent (<code>v[2:4]</code>) ou non (<code>v[c(2, 4)]</code>).</li>
</ul>
<p><img src="img/rstudio_27.png" class="img-fluid" style="width:75.0%"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
La concaténation
</div>
</div>
<div class="callout-body-container callout-body">
<p>La fonction <code>c()</code> permet de concaténer les éléments entre parenthèses.</p>
</div>
</div>
<ul>
<li>Imaginons un <em>data frame d</em>, la sélection s’effectue toujours à l’aide des crochets, mais en précisant deux paramètres séparés d’une virgule : la ou les ligne(s) et la ou les colonnes(s). Pour sélectionner l’ensemble d’une des deux dimensions, on utilise un espace vide d’un côté ou de l’autre de la virgule.</li>
</ul>
<p><img src="img/rstudio_28.png" class="img-fluid" style="width:75.0%"></p>
<p><br></p>
<p>Certaines colonnes du tableau ne sont seront pas utiles pour la suite de l’analyse. Nous pouvons soit :</p>
<ul>
<li>sélectionner les colonnes qui nous intéressent</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre[, <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">9</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>supprimer les colonnes inutiles</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ces deux commandes utilisent les index des colonnes. Vous pouvez également sélectionner ou supprimer des colonnes à l’aide de noms des variables :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre[, <span class="fu">c</span>(<span class="st">"espece"</span>, <span class="st">"ile"</span>, <span class="st">"longueur_bec_mm"</span>, <span class="st">"hauteur_bec_mm"</span>,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>              <span class="st">"longueur_aile_mm"</span>, <span class="st">"masse_corporelle_g"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>Assignons ce nouveau tableau dans un objet :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre <span class="ot">&lt;-</span> pingouins_propre[, <span class="fu">c</span>(<span class="st">"espece"</span>, <span class="st">"ile"</span>, <span class="st">"longueur_bec_mm"</span>,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"hauteur_bec_mm"</span>, <span class="st">"longueur_aile_mm"</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"masse_corporelle_g"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>Nous pouvons filtrer les données selon différents critères, à l’aide d’opérateurs.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Les opérateurs
</div>
</div>
<div class="callout-body-container callout-body">
<table class="table">
<tbody>
<tr class="odd">
<td style="text-align: center;">==</td>
<td style="text-align: left;">égal</td>
</tr>
<tr class="even">
<td style="text-align: center;">!=</td>
<td style="text-align: left;">différent</td>
</tr>
<tr class="odd">
<td style="text-align: center;">&lt;</td>
<td style="text-align: left;">inférieur à</td>
</tr>
<tr class="even">
<td style="text-align: center;">&lt;=</td>
<td style="text-align: left;">inférieur ou égal à</td>
</tr>
<tr class="odd">
<td style="text-align: center;">&gt;</td>
<td style="text-align: left;">supérieur à</td>
</tr>
<tr class="even">
<td style="text-align: center;">&gt;=</td>
<td style="text-align: left;">supérieur ou égal à</td>
</tr>
<tr class="odd">
<td style="text-align: center;">&amp;</td>
<td style="text-align: left;">et</td>
</tr>
<tr class="even">
<td style="text-align: center;">|</td>
<td style="text-align: left;">ou</td>
</tr>
<tr class="odd">
<td style="text-align: center;">!</td>
<td style="text-align: left;">pas</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Individus dont la masse est d'au moins 6 kgs</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>pingouins_propre[pingouins_propre<span class="sc">$</span>masse_corporelle_g <span class="sc">&gt;=</span> <span class="dv">6000</span>, ]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Individus vivant sur l'ile Biscoe dont le bec mesure moins de 50 mm de long</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>pingouins_propre[pingouins_propre<span class="sc">$</span>ile <span class="sc">==</span> <span class="st">"Biscoe"</span> <span class="sc">&amp;</span> pingouins_propre<span class="sc">$</span>longueur_bec_mm <span class="sc">&gt;=</span> <span class="dv">50</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="modifier-une-variable" class="level2">
<h2 class="anchored" data-anchor-id="modifier-une-variable">Modifier une variable</h2>
<p>Les noms d’espèces contenus dans la variable <em>espece</em> sont plutôt longs et peu pratiques à manipuler. Nous allons modifier le contenu de cette variable pour ne garder que le premier mot de chaque chaîne de caractères (Adelie, Chinstrap et Gentoo). Nous allons à nouveau utiliser la fonction <code>gsub()</code> avec une expression régulière pour supprimer tout ce qui vient après le premier espace (nous pourrions également extraire tout ce qui vient avant le premier espace).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>espece <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" .*$"</span>, <span class="st">""</span>, pingouins_propre<span class="sc">$</span>espece)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pingouins_propre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  espece       ile longueur_bec_mm hauteur_bec_mm longueur_aile_mm
1 Adelie Torgersen            39.1           18.7              181
2 Adelie Torgersen            39.5           17.4              186
3 Adelie Torgersen            40.3           18.0              195
4 Adelie Torgersen              NA             NA               NA
5 Adelie Torgersen            36.7           19.3              193
6 Adelie Torgersen            39.3           20.6              190
  masse_corporelle_g
1               3750
2               3800
3               3250
4                 NA
5               3450
6               3650</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dans cette expression régulière (regex), le motif recherché est le suivant : un espace vide () suivi de n’importe quel caractère (<code>.</code>) absent ou répété au moins une fois (<code>*</code>), en fin de chaîne (<code>$</code>).</p>
</div>
</div>
<p><br></p>
</section>
<section id="ajouter-une-variable" class="level2">
<h2 class="anchored" data-anchor-id="ajouter-une-variable">Ajouter une variable</h2>
<p>Quel est le rapport entre la longueur du bec et sa hauteur ? Calculons le ratio :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>ratio_bec <span class="ot">&lt;-</span> pingouins_propre<span class="sc">$</span>longueur_bec_mm <span class="sc">/</span> pingouins_propre<span class="sc">$</span>hauteur_bec_mm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>Pour arrondir ce ratio à deux chiffres après la virgule, nous pouvons utiliser la fonction <code>round()</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>ratio_bec <span class="ot">&lt;-</span> <span class="fu">round</span>(pingouins_propre<span class="sc">$</span>ratio_bec, <span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="supprimer-les-données-manquantes" class="level2">
<h2 class="anchored" data-anchor-id="supprimer-les-données-manquantes">Supprimer les données manquantes</h2>
<p>Notre jeu de données contient des données manquantes (<code>NA</code>). En affichant les premières lignes, vous pourrez remarquer que pour l’individu situé sur la quatrième ligne, aucune donnée numérique n’est disponible :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pingouins_propre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  espece       ile longueur_bec_mm hauteur_bec_mm longueur_aile_mm
1 Adelie Torgersen            39.1           18.7              181
2 Adelie Torgersen            39.5           17.4              186
3 Adelie Torgersen            40.3           18.0              195
4 Adelie Torgersen              NA             NA               NA
5 Adelie Torgersen            36.7           19.3              193
6 Adelie Torgersen            39.3           20.6              190
  masse_corporelle_g ratio_bec
1               3750      2.09
2               3800      2.27
3               3250      2.24
4                 NA        NA
5               3450      1.90
6               3650      1.91</code></pre>
</div>
</div>
<p>Pour savoir combien de données manquantes sont présentes dans vos données, vous pouvez utiliser la commande suivante :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(pingouins_propre))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
 2398    10 </code></pre>
</div>
</div>
<p>Nos données contiennent 10 valeurs NA, nous en avons déjà trouvé 5 dans les premières lignes du tableau. Les 5 données manquantes restantes viennent-elles de l’absence de mesure pour un second individu ?</p>
<p>La fonction <code>complete.cases()</code> permet d’extraire les lignes d’un tableau pour lesquelles il n’y a aucune donnée manquante.</p>
<p>Nous cherchons à extraire les lignes qui contiennent au moins une donnée manquante. Pour cela nous allons filtrer les données en extrayant les lignes à l’aide de l’opérateur de négation <code>!</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre[<span class="sc">!</span><span class="fu">complete.cases</span>(pingouins_propre), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    espece       ile longueur_bec_mm hauteur_bec_mm longueur_aile_mm
4   Adelie Torgersen              NA             NA               NA
272 Gentoo    Biscoe              NA             NA               NA
    masse_corporelle_g ratio_bec
4                   NA        NA
272                 NA        NA</code></pre>
</div>
</div>
<p>Nous avons ici les dix données manquantes. Nous allons supprimer ces deux individus du jeu de données :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre <span class="ot">&lt;-</span> pingouins_propre[<span class="fu">complete.cases</span>(pingouins_propre), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nous aurions également pu supprimer les lignes pour lesquelles une des variables numériques contient des données manquantes :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre <span class="ot">&lt;-</span> pingouins_propre[<span class="sc">!</span><span class="fu">is.na</span>(pingouins_propre<span class="sc">$</span>longueur_bec_mm), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Assurons-nous d’avoir bien supprimé ces données manquantes :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(pingouins_propre))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE 
 2394 </code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="transformer-un-vecteur-en-un-facteur" class="level2">
<h2 class="anchored" data-anchor-id="transformer-un-vecteur-en-un-facteur">Transformer un vecteur en un facteur</h2>
<p>Affichons la synthèse de nos données</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pingouins_propre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    espece              ile            longueur_bec_mm hauteur_bec_mm 
 Length:342         Length:342         Min.   :32.10   Min.   :13.10  
 Class :character   Class :character   1st Qu.:39.23   1st Qu.:15.60  
 Mode  :character   Mode  :character   Median :44.45   Median :17.30  
                                       Mean   :43.92   Mean   :17.15  
                                       3rd Qu.:48.50   3rd Qu.:18.70  
                                       Max.   :59.60   Max.   :21.50  
 longueur_aile_mm masse_corporelle_g   ratio_bec    
 Min.   :172.0    Min.   :2700       Min.   :1.640  
 1st Qu.:190.0    1st Qu.:3550       1st Qu.:2.160  
 Median :197.0    Median :4050       Median :2.575  
 Mean   :200.9    Mean   :4202       Mean   :2.606  
 3rd Qu.:213.0    3rd Qu.:4750       3rd Qu.:3.100  
 Max.   :231.0    Max.   :6300       Max.   :3.610  </code></pre>
</div>
</div>
<p>La variable espece est considérée comme une simple chaîne de caractère. S’agit-il d’une variable ayant un nombre restreint de modalités ? Pour le savoir, comptons le nombre d’observations uniques :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(pingouins_propre<span class="sc">$</span>espece))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Colorer les parenthèses
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il n’est pas rare que notre code contienne plusieurs parenthèses, ce qui rend sa lecture moins aisée. RStudio vous propose de colorer vos parenthèses afin de mieux vous repérer :</p>
<ul>
<li><p>Cliquez sur <em>Tools</em> &gt; <em>Global Options</em> &gt; <em>Code</em> &gt; <em>Display</em></p></li>
<li><p>Cochez la case <em>Rainbow parentheses</em></p></li>
<li><p>Cliquez sur <em>Apply</em></p></li>
</ul>
<p><img src="img/rstudio_39.png" class="img-fluid" style="width:75.0%"></p>
</div>
</div>
<p>Nous aurions pu également utiliser la fonction <code>table()</code> pour extraire les modalités et leur fréquence :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Adelie Chinstrap    Gentoo 
      151        68       123 </code></pre>
</div>
</div>
<p><br></p>
<p>Il n’y a que trois modalités possibles pour cette variable : il s’agit d’une variable catégorielle. La fonction <code>as.factor()</code> permet de transformer un vecteur en un facteur. Par défaut, les modalités (niveaux) d’un facteur sont classés par ordre alphabétique. Vous pouvez définir l’ordre des niveaux à l’aide de l’argument <code>levels = ...</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>espece <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(pingouins_propre<span class="sc">$</span>espece)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Procédons de la même façon pour la variable <em>ile</em> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>ile <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(pingouins_propre<span class="sc">$</span>ile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vérifiez que les corrections apportées aient bien été appliquées au jeu de données :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pingouins_propre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       espece           ile      longueur_bec_mm hauteur_bec_mm 
 Adelie   :151   Biscoe   :167   Min.   :32.10   Min.   :13.10  
 Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
 Gentoo   :123   Torgersen: 51   Median :44.45   Median :17.30  
                                 Mean   :43.92   Mean   :17.15  
                                 3rd Qu.:48.50   3rd Qu.:18.70  
                                 Max.   :59.60   Max.   :21.50  
 longueur_aile_mm masse_corporelle_g   ratio_bec    
 Min.   :172.0    Min.   :2700       Min.   :1.640  
 1st Qu.:190.0    1st Qu.:3550       1st Qu.:2.160  
 Median :197.0    Median :4050       Median :2.575  
 Mean   :200.9    Mean   :4202       Mean   :2.606  
 3rd Qu.:213.0    3rd Qu.:4750       3rd Qu.:3.100  
 Max.   :231.0    Max.   :6300       Max.   :3.610  </code></pre>
</div>
</div>
<p><br></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Raccourcis clavier : les sections d’un script
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour afficher le sommaire de votre script, utilisez la combinaison <strong>Ctrl + Shift + O</strong>.<br>
Vous pouvez également replier (<strong>Alt + O</strong>) ou déplier (<strong>Alt + Shift + O</strong>) les sections.</p>
</div>
</div>
<p><br></p>
</section>
<section id="agréger-des-données" class="level2">
<h2 class="anchored" data-anchor-id="agréger-des-données">Agréger des données</h2>
<p>La fonction <code>aggregate()</code> permet de calculer des statistiques descriptives (par exemple la moyenne, la médiane, …) d’une variable en regroupant les données.</p>
<p>Cette fonction s’utilise de la manière suivante :</p>
<p><code>aggregate(y ~ x, data, FUN)</code> :</p>
<ul>
<li><code>x</code> : variable explicative qui sert à regouper les données<br>
</li>
<li><code>y</code> : variable pour laquelle on souhaite calculer une statistique<br>
</li>
<li><code>data</code> : données contenant les variables<br>
</li>
<li><code>FUN</code> : fonction à appliquer.</li>
</ul>
<p>Nous pouvons par exemple calculer la moyenne de la masse corporelle pour chacune des trois espèces :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(masse_corporelle_g <span class="sc">~</span> espece, <span class="at">data =</span> pingouins_propre, <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     espece masse_corporelle_g
1    Adelie           3700.662
2 Chinstrap           3733.088
3    Gentoo           5076.016</code></pre>
</div>
</div>
<p>Nous pouvons également utiliser plusieurs variables de regroupement : calculons la moyenne de la masse corporelle par île et par espèce :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(masse_corporelle_g <span class="sc">~</span> espece <span class="sc">+</span> ile, <span class="at">data =</span> pingouins_propre, <span class="at">FUN =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     espece       ile masse_corporelle_g
1    Adelie    Biscoe           3709.659
2    Gentoo    Biscoe           5076.016
3    Adelie     Dream           3688.393
4 Chinstrap     Dream           3733.088
5    Adelie Torgersen           3706.373</code></pre>
</div>
</div>
</section>
<section id="exporter-des-données" class="level2">
<h2 class="anchored" data-anchor-id="exporter-des-données">Exporter des données</h2>
<p>La fonction <code>write.csv()</code> permet d’exporter un tableau. L’argument <code>row.names = FALSE</code> empêche l’ajout de noms de lignes (dans notre cas des valeurs numériques allant de 1 au nombre de lignes du tableau) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(pingouins_propre, <span class="st">"data/pingouins_propre.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="représenter-des-données" class="level1">
<h1>Représenter des données</h1>
<section id="barplot" class="level2">
<h2 class="anchored" data-anchor-id="barplot">Barplot</h2>
<p>Pour représenter le nombre d’individus par espèce, nous allons utiliser un graphique en barres (barplot) : la hauteur de chaque barre indique le nombre d’individus.</p>
<p>Il nous faut pour cela un objet contenant l’information sur le nombre d’individus par espèce :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Adelie Chinstrap    Gentoo 
      151        68       123 </code></pre>
</div>
</div>
<p>La fonction <code>barplot()</code> permet de générer un graphique en barres :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ce graphique est très basique, nous pouvons améliorer plusieurs points :</p>
<ul>
<li><em>trier les données</em> : nous aimerions que les barres soient triées par ordre décroissant. La fonction <code>sort()</code> permet de trier des données, avec l’argument <code>decreasing = TRUE</code> pour modifier l’ordre (croissant par défaut)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">sort</span>(<span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece), <span class="at">decreasing =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><em>ajouter des couleurs</em> : le paramètre <code>col</code> permet de modifier la couleur de remplissage des barres, et le paramètre <code>border</code> la couleur de contour. Nous aimerions utiliser les couleurs de l’image ci-dessous :</li>
</ul>
<p><img src="img/rstudio_35.png" class="img-fluid" style="width:50.0%"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">sort</span>(<span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece), <span class="at">decreasing =</span> <span class="cn">TRUE</span>),</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="st">"cyan4"</span>,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="st">"purple"</span>),</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><em>ajouter des titres au graphique et aux axes</em> : l’argument <code>main</code> permet d’ajouter un titre au graphique alors que les arguments <code>xlab</code> et <code>ylab</code> permettent de modifier les titres des axes.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">sort</span>(<span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece), <span class="at">decreasing =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>,</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="st">"cyan4"</span>,</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="st">"purple"</span>),</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="cn">NA</span>,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pingouins de l'archipel Palmer"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Nombre d'individus par espèce"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><em>ajuster l’échelle de l’axe y</em> : la valeur maximale dépasse la plus grande valeur affichée sur l’axe y. Les options <code>xlim</code> et <code>ylim</code> permettent d’ajuster les limites des axes.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">sort</span>(<span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece), <span class="at">decreasing =</span> <span class="cn">TRUE</span>),</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>,</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="st">"cyan4"</span>,</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="st">"purple"</span>),</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="cn">NA</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pingouins de l'archipel Palmer"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Nombre d'individus par espèce"</span>,</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">200</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="boxplot" class="level2">
<h2 class="anchored" data-anchor-id="boxplot">Boxplot</h2>
<p>Un boxplot, ou graphique en boîte à moustaches, permet de représenter la dispersion d’une variable.</p>
<p>Nous aimerions représenter la dispersion du ratio entre la longueur et la hauteur du bec. Nous utilisons pour cela la fonction <code>boxplot()</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(pingouins_propre<span class="sc">$</span>ratio_bec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Pour savoir si ce ratio varie en fonction des espèces, nous utilisons l’opérateur <code>~</code> : <code>boxplot(x ~ y)</code> permettra de représenter la dispersion de la variable x en fonction de la variable y.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(pingouins_propre<span class="sc">$</span>ratio_bec <span class="sc">~</span> pingouins_propre<span class="sc">$</span>espece)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ajustons quelques éléments :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(pingouins_propre<span class="sc">$</span>ratio_bec <span class="sc">~</span> pingouins_propre<span class="sc">$</span>espece,</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="cn">NA</span>,</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="st">"cyan4"</span>,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="st">"purple"</span>),</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">pch =</span> <span class="dv">20</span>,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Rapport entre la longueur et la hauteur du bec"</span>,</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">""</span>,</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Ratio"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
pch
</div>
</div>
<div class="callout-body-container callout-body">
<p>L’argument pch permet de modifier la forme des points dans un graphique. <img src="img/rstudio_36.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
</section>
<section id="histogramme" class="level2">
<h2 class="anchored" data-anchor-id="histogramme">Histogramme</h2>
<p>Un histogramme sert à visualiser la distribution d’une variable numérique.</p>
<p>Comment se distribue la masse corporelle des pingouins ? Nous utilisons la fonction <code>hist()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(pingouins_propre<span class="sc">$</span>masse_corporelle_g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>L’argument <code>breaks</code> permet d’ajuster le nombre de classes de l’histogramme :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(pingouins_propre<span class="sc">$</span>masse_corporelle_g,</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Nous souhaiterions représenter les valeurs en kilogrammes plutôt qu’en grammes pour facililter la lecture :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(pingouins_propre<span class="sc">$</span>masse_corporelle_g <span class="sc">/</span> <span class="dv">1000</span>,</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Améliorons notre graphique :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(pingouins_propre<span class="sc">$</span>masse_corporelle_g <span class="sc">/</span> <span class="dv">1000</span>,</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>,</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">border =</span> <span class="st">"darkblue"</span>,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>),</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Distribution de la masse corporelle"</span>,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Masse (kgs)"</span>,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Fréquence"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="scatter-plot" class="level2">
<h2 class="anchored" data-anchor-id="scatter-plot">Scatter plot</h2>
<p>Le scatter plot (ou nuage de points) permet de représenter la relation entre deux variables numériques. Nous utilisons pour cela la fonction <code>plot()</code></p>
<p>Quelle est la relation entre la longueur des ailes et la longueur du bec ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> pingouins_propre<span class="sc">$</span>longueur_aile_mm, <span class="at">y =</span> pingouins_propre<span class="sc">$</span>longueur_bec_mm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ce graphique ne nous donne aucune indication sur les différentes espèces. Nous allons donc ajouter une couleur à chaque point, en ajoutant une variable <em>couleur</em> à notre tableau d’origine. Les valeurs de cette variables dépendent de l’espèce.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>couleur[pingouins_propre<span class="sc">$</span>espece <span class="sc">==</span> <span class="st">"Adelie"</span>] <span class="ot">&lt;-</span> <span class="st">"darkorange"</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>couleur[pingouins_propre<span class="sc">$</span>espece <span class="sc">==</span> <span class="st">"Chinstrap"</span>] <span class="ot">&lt;-</span> <span class="st">"purple"</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>pingouins_propre<span class="sc">$</span>couleur[pingouins_propre<span class="sc">$</span>espece <span class="sc">==</span> <span class="st">"Gentoo"</span>] <span class="ot">&lt;-</span> <span class="st">"cyan4"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Représentons à nouveau nos données :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> pingouins_propre<span class="sc">$</span>longueur_aile_mm, <span class="at">y =</span> pingouins_propre<span class="sc">$</span>longueur_bec_mm,</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> pingouins_propre<span class="sc">$</span>couleur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Améliorons à présent le graphique en modifiant la forme des points et en ajoutant/modifiant les titres :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> pingouins_propre<span class="sc">$</span>longueur_aile_mm, <span class="at">y =</span> pingouins_propre<span class="sc">$</span>longueur_bec_mm,</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> pingouins_propre<span class="sc">$</span>couleur,</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">20</span>,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Relation entre la longueur des ailes et la longueur du bec"</span>,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Longueur des ailes (mm)"</span>,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Longueur du bec (mm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Pour finir, ajoutons une légende à notre graphique à l’aide la fonction <code>legend()</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> pingouins_propre<span class="sc">$</span>longueur_aile_mm, <span class="at">y =</span> pingouins_propre<span class="sc">$</span>longueur_bec_mm,</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> pingouins_propre<span class="sc">$</span>couleur,</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">20</span>,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Relation entre la longueur des ailes et la longueur du bec"</span>,</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Longueur des ailes (mm)"</span>,</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Longueur du bec (mm)"</span>)</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="at">legend =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(pingouins_propre<span class="sc">$</span>espece)),</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="dv">215</span>,</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="dv">40</span>,</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"purple"</span>, <span class="st">"cyan4"</span>),</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch =</span> <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exporter-un-graphique" class="level2">
<h2 class="anchored" data-anchor-id="exporter-un-graphique">Exporter un graphique</h2>
<p>Pour exporter un graphique, vous pouvez cliquer sur <em>Export</em> dans l’onglet Plots :</p>
<p><img src="img/rstudio_37.png" class="img-fluid" style="width:50.0%"></p>
<p>Dans la fenêtre qui s’ouvre, choisissez l’emplacement où votre graphique sera exporté, et donnez-lui un nom. Vous pouvez aussi ajuster les dimensions de la figure.</p>
<p><img src="img/rstudio_38.png" class="img-fluid" style="width:50.0%"></p>
<p>Vous pouvez également sauvegarder votre graphique à l’aide des fonctions suivantes :</p>
<ul>
<li><p><code>png()</code> pour ouvrir l’outil graphique</p></li>
<li><p><code>dev.off()</code> pour fermer l’outil graphique</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="st">"figs/nombre_pingouins.png"</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">sort</span>(<span class="fu">table</span>(pingouins_propre<span class="sc">$</span>espece), <span class="at">decreasing =</span> <span class="cn">TRUE</span>),</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Chinstrap"</span> <span class="ot">=</span> <span class="st">"cyan4"</span>,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Gentoo"</span> <span class="ot">=</span> <span class="st">"purple"</span>),</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="cn">NA</span>,</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Pingouins de l'archipel Palmer"</span>,</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Nombre d'individus par espèce"</span>,</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">200</span>))</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Les paramètres graphiques
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pour afficher l’aide des paramètres graphiques, tapez <code>?par</code></p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>